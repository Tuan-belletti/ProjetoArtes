<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erechim Revisitada pelos Modernistas</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap');

        :root {
            --cor-fundo: #f4f1ea;
            --cor-primaria: #2c3e50;
            --cor-secundaria: #c03b2b;
            --cor-acento: #e67e22;
            --cor-texto: #34495e;
            --cor-feedback-certo: #27ae60;
            --cor-feedback-errado: #c0392b;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            margin: 0;
            padding: 20px;
            text-align: center;
            user-select: none;
        }

        h1, h2 {
            font-family: 'Playfair Display', serif;
            color: var(--cor-primaria);
        }

        .container { max-width: 900px; margin: auto; }

        .intro-text {
            max-width: 750px;
            margin: 25px auto 40px auto;
            text-align: justify;
            line-height: 1.6;
            font-size: 16px;
        }

        .intro-text p { margin-bottom: 1em; }
        
        .intro-text p:last-child {
            margin-bottom: 0;
            text-align: center;
            font-weight: bold;
            color: var(--cor-primaria);
        }

        #map-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            height: 500px;
            margin: 30px auto;
            background-color: #a9cce3;
            background-image: url('https://www.transparenttextures.com/patterns/subtle-carbon.png');
            border: 5px solid var(--cor-primaria);
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        #map-container::before {
            content: "Arraste os locais para reorganizar o roteiro!";
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-style: italic;
            color: rgba(0,0,0,0.5);
            font-size: 14px;
        }
        
        #map-lines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }

        .map-marker {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: var(--cor-secundaria);
            border: 2px solid white;
            border-radius: 50%;
            cursor: grab;
            transition: transform 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            z-index: 2; 
        }

        .map-marker:hover { transform: scale(1.2); }
        
        .map-marker.dragging {
            transform: scale(1.3);
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            z-index: 10;
            cursor: grabbing;
        }
        
        #marker-castelinho { top: 15%; left: 10%; }
        #marker-chafariz { top: 40%; left: 30%; }
        #marker-catedral { top: 55%; left: 15%; }
        #marker-prefeitura { top: 35%; left: 60%; }
        #marker-portico { top: 80%; left: 45%; }
        #marker-ypiranga { top: 75%; left: 75%; }
        #marker-ifrs { top: 10%; left: 80%; }

        .tooltip {
            background-color: var(--cor-primaria);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 11;
            width: 160px;
            margin-left: -80px;
            left: 50%;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .tooltip.visible { visibility: visible; opacity: 1; }
        .tooltip.position-above { bottom: 120%; }
        .tooltip.position-below { top: 120%; }

        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: var(--cor-fundo); padding: 30px; border-radius: 15px; width: 90%; max-width: 650px; max-height: 90vh; overflow-y: auto; position: relative; box-shadow: 0 15px 30px rgba(0,0,0,0.4); }
        .close-button { position: absolute; top: 10px; right: 15px; font-size: 30px; font-weight: bold; color: var(--cor-primaria); cursor: pointer; }
        
        #completion-modal .modal-content {
            max-width: 500px;
            text-align: center;
        }
        #final-score-container {
            font-size: 1.5em;
            margin: 20px 0;
            color: var(--cor-texto);
        }
        #final-score-container span {
            font-weight: bold;
            color: var(--cor-acento);
            font-size: 1.2em;
        }
        #restart-all-button {
            background-color: var(--cor-acento);
        }

        #modal-image { width: 100%; height: 200px; background-size: cover; background-position: center; border-radius: 10px; margin-bottom: 20px; border: 3px solid var(--cor-primaria); }
        #modal-intro { font-style: italic; text-align: left; margin-bottom: 25px; }
        #quiz-form { text-align: left; }
        .question-block { margin-bottom: 20px; padding: 15px; border-left: 5px solid var(--cor-acento); background-color: #fff; border-radius: 0 8px 8px 0; }
        .question-block h4 { margin-top: 0; }
        .question-block label { display: block; margin: 5px 0; padding: 8px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; }
        .question-block label:hover { background-color: #f0f0f0; }
        .question-block input[type="radio"]:disabled + span { color: #888; }
        
        .feedback { margin-top: 10px; padding: 10px; border-radius: 5px; font-style: italic; display: none; }
        .feedback.correct { background-color: #eafaf1; border-left: 3px solid var(--cor-feedback-certo); color: var(--cor-feedback-certo); }
        .feedback.incorrect { background-color: #f9ebea; border-left: 3px solid var(--cor-feedback-errado); color: var(--cor-feedback-errado); }
        
        .quiz-button { display: block; width: 100%; padding: 15px; font-size: 18px; font-weight: bold; color: white; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.3s; margin-top: 10px; }
        #quiz-submit { background-color: var(--cor-secundaria); }
        #quiz-submit:hover { background-color: var(--cor-acento); }

        .quiz-results-area { margin-top: 20px; }
        #quiz-score { font-size: 20px; font-weight: bold; margin-bottom: 15px; }
        .results-buttons { display: flex; flex-direction: column; gap: 10px; }
        
        #back-button { background-color: var(--cor-primaria); }
        #back-button:hover { background-color: #5d6d7e; }
        
        #reset-button { background-color: transparent; color: var(--cor-primaria); border: 2px solid var(--cor-primaria); }
        #reset-button:hover { background-color: var(--cor-primaria); color: white; }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 2.2em;
            }

            .intro-text {
                text-align: left;
                font-size: 15px;
                margin-bottom: 30px;
            }

            #map-container {
                height: auto;
                aspect-ratio: 4 / 3;
            }

            #marker-castelinho { top: 10%; left: 15%; }
            #marker-ifrs { top: 15%; left: 70%; }
            #marker-prefeitura { top: 35%; left: 45%; }
            #marker-catedral { top: 50%; left: 18%; }
            #marker-chafariz { top: 65%; left: 65%; }
            #marker-portico { top: 85%; left: 25%; }
            #marker-ypiranga { top: 82%; left: 75%; }
            
            .modal-content {
                padding: 20px 15px;
                max-height: 95vh;
            }

            .question-block h4 {
                font-size: 1.1em;
            }

            .quiz-button {
                padding: 12px;
                font-size: 16px;
            }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Erechim Revisitada pelos Modernistas</h1>
        <div class="intro-text">
            <p>Em 1922, um terremoto cultural chacoalhou o Brasil. A <strong>Semana de Arte Moderna</strong>, realizada no Theatro Municipal de S√£o Paulo, foi o grito de independ√™ncia de artistas que n√£o queriam mais copiar a Europa. Liderados por figuras como M√°rio de Andrade, Oswald de Andrade, Anita Malfatti e Tarsila do Amaral, eles buscavam uma linguagem autenticamente brasileira, que misturasse nossas cores, nosso povo e nossas hist√≥rias com as novas e ousadas formas da vanguarda. Eles queriam romper com o passado e inventar um novo futuro.</p>
            <p>Naquela mesma √©poca, nossa Erechim era uma cidade jovem, um projeto de futuro que come√ßava a tomar forma no norte do Rio Grande do Sul. A influ√™ncia direta daquele movimento em nossos pr√©dios e monumentos foi pequena, pois nossos principais cart√µes-postais foram erguidos nas d√©cadas seguintes.</p>
            <p>Mas... e se essa busca por uma identidade brasileira acontecesse hoje, em nossas ruas? E se os modernistas caminhassem por Erechim agora, em agosto de 2025?</p>
            <p>√â este o convite que este site faz a voc√™.</p>
            <p>Aqui, imaginamos como esses artistas vision√°rios interpretariam nossos pontos tur√≠sticos e culturais. Como as cores vibrantes de <strong>Tarsila do Amaral</strong> dariam nova vida ao <strong>Castelinho</strong>? Como o expressionismo dram√°tico de <strong>Anita Malfatti</strong> capturaria a alma da <strong>Catedral S√£o Jos√©</strong>? E como a "antropofagia" de <strong>Oswald de Andrade</strong> ‚Äì a ideia de "devorar" culturas para criar algo novo ‚Äì se aplicaria √† arquitetura da <strong>Prefeitura</strong> ou √† miss√£o educadora do <strong>IFRS</strong>?</p>
            <p>Este mapa interativo √© um roteiro l√∫dico, uma conversa entre tempos e uma brincadeira cultural. Navegue, arraste os √≠cones, clique nos locais para desvendar suas hist√≥rias e teste seus conhecimentos nos quizzes que unem passado e presente.</p>
            <p>Prepare-se para ver Erechim com novos olhos: os olhos inquietos e revolucion√°rios dos modernistas de 22.</p>
        </div>
        <div id="map-container">
            <svg id="map-lines"></svg>
            <div class="map-marker" id="marker-castelinho" data-spot="castelinho"> üè∞ <span class="tooltip">Castelinho</span> </div>
            <div class="map-marker" id="marker-catedral" data-spot="catedral"> ‚õ™ <span class="tooltip">Catedral S√£o Jos√©</span> </div>
            <div class="map-marker" id="marker-prefeitura" data-spot="prefeitura"> üèõÔ∏è <span class="tooltip">Prefeitura Municipal</span> </div>
            <div class="map-marker" id="marker-portico" data-spot="portico"> üö™ <span class="tooltip">P√≥rtico de Erechim</span> </div>
            <div class="map-marker" id="marker-ypiranga" data-spot="ypiranga"> üèüÔ∏è <span class="tooltip">Est√°dio do Ypiranga</span> </div>
            <div class="map-marker" id="marker-chafariz" data-spot="chafariz"> ‚õ≤ <span class="tooltip">Chafariz</span> </div>
            <div class="map-marker" id="marker-ifrs" data-spot="ifrs"> üéì <span class="tooltip">IFRS Campus Erechim</span> </div>
        </div>
    </div>

    <div class="modal-overlay" id="quiz-modal-overlay">
        <div class="modal-content">
            <span class="close-button" id="quiz-close-button">&times;</span>
            <div id="modal-image"></div>
            <h2 id="modal-title"></h2>
            <p id="modal-intro"></p>
            <div id="quiz-container"></div>
            <div class="quiz-results-area" id="quiz-results-area"></div>
        </div>
    </div>
    
    <div class="modal-overlay" id="completion-modal-overlay">
        <div class="modal-content" id="completion-modal">
            <span class="close-button" id="completion-close-button">&times;</span>
            <h2>Parab√©ns! ü•≥</h2>
            <p>Voc√™ completou o roteiro modernista de Erechim!</p>
            <div id="final-score-container">
                Voc√™ acertou <span id="final-score"></span> de <span id="total-questions"></span> perguntas.
            </div>
            <button id="restart-all-button" class="quiz-button">Reiniciar Roteiro</button>
        </div>
    </div>

<script>
const connectionPath = ['castelinho', 'chafariz', 'catedral', 'portico', 'ypiranga', 'prefeitura', 'ifrs'];
const pontosTuristicos = {
    castelinho: { id: "castelinho", nome: "O Castelinho", artista: "Tarsila do Amaral", imagemUrl: "img/castelinho.jpg", textoIntroducao: `Tarsila adorava retratar o Brasil "para exporta√ß√£o". Ao ver o Castelinho, ela n√£o veria apenas uma lareira de pedra, mas uma forma geom√©trica ousada contra o c√©u azul, simplificando suas linhas e pintando o jardim com as cores da nossa terra.`, quiz: [ { pergunta: `O pr√©dio hist√≥rico conhecido como "Castelinho" tem um nome oficial. Qual √©?`, opcoes: ["Pa√ßo Municipal", "Centro Cultural 25 de Julho", "Comiss√£o de Terras", "Pr√©dio da Administra√ß√£o"], respostaCorreta: 2, feedback: { correct: `Isso mesmo! Ele foi a sede da Comiss√£o de Terras. Oswald de Andrade chamaria isso de "devorar" o territ√≥rio para criar uma nova cultura.`, incorrect: `Quase! O nome oficial √© Comiss√£o de Terras, pois foi o centro administrativo da coloniza√ß√£o de Erechim.` } }, { pergunta: `A constru√ß√£o do Castelinho foi finalizada em 1918. Qual era o seu principal material de constru√ß√£o?`, opcoes: ["Tijolos", "Concreto", "Madeira", "A√ßo"], respostaCorreta: 2, feedback: { correct: `Exato, a madeira! Os modernistas valorizavam os materiais nacionais, e a madeira de arauc√°ria era abundante na regi√£o.`, incorrect: `Opa! O principal material usado foi a madeira de arauc√°ria, t√≠pica da nossa regi√£o.` } }, { pergunta: `Atualmente, qual destes usos N√ÉO corresponde √† sua fun√ß√£o hoje?`, opcoes: ["Sede do Arquivo Hist√≥rico", "Espa√ßo para exposi√ß√µes", "Sede da Prefeitura de Erechim", "Ponto de informa√ß√µes tur√≠sticas"], respostaCorreta: 2, feedback: { correct: `Isso mesmo! A Prefeitura fica em outro pr√©dio. O Castelinho hoje pulsa com arte e hist√≥ria.`, incorrect: `N√£o √© essa a resposta. A fun√ß√£o que o Castelinho n√£o tem hoje √© de Sede da Prefeitura, que fica em outro local.` } }, { pergunta: `Imagine que Tarsila do Amaral pintou o Castelinho. Qual elemento ela certamente exageraria com cores fortes?`, opcoes: ["Os carros na rua", "As √°rvores e flores do jardim", "As antenas de TV", "O asfalto da avenida"], respostaCorreta: 1, feedback: { correct: `Sim! Tarsila transformaria nosso jardim em uma selva de cores vibrantes, celebrando a natureza que abra√ßa a arquitetura.`, incorrect: `Quase! Tarsila valorizava a natureza e as cores do Brasil. Ela provavelmente daria destaque √†s √°rvores e flores do jardim.` } }, { pergunta: `Qual o principal estilo arquitet√¥nico do Castelinho?`, opcoes: ["Art D√©co", "G√≥tico", "Ecl√©tico com influ√™ncias europeias", "Modernista"], respostaCorreta: 2, feedback: { correct: `Perfeito! Seu estilo √© ecl√©tico. Os modernistas o "antropofagizariam": absorveriam sua hist√≥ria para transform√°-la em algo nosso.`, incorrect: `Na verdade, o estilo √© Ecl√©tico, misturando v√°rias influ√™ncias europeias da √©poca.` } } ] },
    catedral: { id: "catedral", nome: "Catedral S√£o Jos√©", artista: "Anita Malfatti", imagemUrl: "img/catedral_2.jpg", textoIntroducao: `Anita Malfatti usava cores e formas para expressar emo√ß√£o. Diante da impon√™ncia da Catedral S√£o Jos√©, seus tra√ßos expressionistas capturariam a for√ßa dos arcos, a luz dram√°tica dos vitrais e a f√© do povo, pintando a alma do edif√≠cio.`, quiz: [ { pergunta: `Em que d√©cada a constru√ß√£o da Catedral S√£o Jos√© foi conclu√≠da?`, opcoes: ["D√©cada de 1920", "D√©cada de 1940", "D√©cada de 1970", "D√©cada de 1990"], respostaCorreta: 2, feedback: { correct: `Isso mesmo, na d√©cada de 1970! √â um exemplo da arquitetura religiosa moderna da √©poca.`, incorrect: `Na verdade, a constru√ß√£o como a conhecemos foi finalizada na d√©cada de 1970.` } }, { pergunta: `Qual termo descreve melhor a arquitetura da Catedral?`, opcoes: ["Barroco", "Art D√©co", "Moderno-Brutalista", "Neocl√°ssico"], respostaCorreta: 2, feedback: { correct: `Correto! A Catedral adota um estilo moderno com elementos do brutalismo. Uma est√©tica forte que Anita Malfatti certamente apreciaria.`, incorrect: `O estilo que melhor descreve a Catedral √© o Moderno com tra√ßos do Brutalismo, pelo uso de concreto e formas geom√©tricas.` } }, { pergunta: `Se Anita Malfatti fosse pintar a Catedral, em qual elemento ela focaria para transmitir a maior carga de emo√ß√£o?`, opcoes: ["O rel√≥gio da torre", "As escadarias", "Os vitrais coloridos e a luz", "O estacionamento"], respostaCorreta: 2, feedback: { correct: `Exatamente! Os vitrais seriam o ponto alto para Anita Malfatti explorar o contraste das cores e a luz de forma dram√°tica.`, incorrect: `Provavelmente n√£o. Para uma artista expressionista como Anita Malfatti, os vitrais e o jogo de luz seriam a escolha perfeita para transmitir emo√ß√£o.` } }, { pergunta: `A cidade de Erechim tem um padroeiro. Quem √©?`, opcoes: ["S√£o Pedro", "Nossa Senhora de F√°tima", "Santo Agostinho", "S√£o Jo√£o Batista"], respostaCorreta: 0, feedback: { correct: `Perfeito! O padroeiro de Erechim √© S√£o Pedro. A Catedral √© dedicada a S√£o Jos√©.`, incorrect: `Opa, quase! O padroeiro da cidade de Erechim √© S√£o Pedro.` } }, { pergunta: `A arquitetura da Catedral, embora moderna, tem inspira√ß√£o em qual movimento europeu?`, opcoes: ["Renascimento Italiano", "Rococ√≥ Franc√™s", "Modernismo Europeu (Le Corbusier)", "G√≥tico Ingl√™s"], respostaCorreta: 2, feedback: { correct: `Isso mesmo! A arquitetura religiosa moderna no Brasil foi muito influenciada por arquitetos do Modernismo Europeu, como Le Corbusier.`, incorrect: `A inspira√ß√£o principal vem do Modernismo Europeu, de arquitetos como o franco-su√≠√ßo Le Corbusier.` } } ] },
    prefeitura: { id: "prefeitura", nome: "Prefeitura Municipal", artista: "Oswald de Andrade", imagemUrl: "img/prefeitura.jpg", textoIntroducao: `Oswald de Andrade, com seu Manifesto Antropof√°gico, nos ensinou a 'devorar' a cultura estrangeira para criar algo autenticamente brasileiro. O pr√©dio da prefeitura, com seu estilo Art D√©co, √© um prato cheio: uma est√©tica europeia 'digerida' e transformada em um s√≠mbolo c√≠vico de Erechim.`, quiz: [ { pergunta: `A Prefeitura de Erechim √© um dos mais belos exemplos de qual estilo arquitet√¥nico na cidade?`, opcoes: ["Neocl√°ssico", "Colonial", "Art D√©co", "Barroco"], respostaCorreta: 2, feedback: { correct: `Correto! O Art D√©co, com suas formas geom√©tricas e eleg√¢ncia, era o estilo 'moderno' da √©poca e marcou a arquitetura de Erechim.`, incorrect: `Na verdade, o estilo marcante da Prefeitura √© o Art D√©co, muito popular nas d√©cadas de 1930 e 1940.` } }, { pergunta: `Oswald de Andrade valorizava a ruptura com o 'passadismo'. O pr√©dio da prefeitura, de 1941, representou uma moderniza√ß√£o em rela√ß√£o a qual antiga sede do poder?`, opcoes: ["O pr√≥prio Castelinho", "Um pr√©dio na Av. Maur√≠cio Cardoso", "Salas alugadas", "N√£o havia sede anterior"], respostaCorreta: 0, feedback: { correct: `Exato! Antes da prefeitura, parte da administra√ß√£o funcionava no Castelinho. Uma verdadeira 'antropofagia' de fun√ß√µes!`, incorrect: `Antes deste pr√©dio, a administra√ß√£o municipal funcionava parcialmente no Castelinho.` } }, { pergunta: `O Manifesto Antropof√°gico foi publicado em 1928. A que ele se opunha principalmente?`, opcoes: ["√Ä industrializa√ß√£o do Brasil", "√Ä c√≥pia pura e simples da cultura europeia", "√Ä pintura de paisagens", "√Ä imigra√ß√£o"], respostaCorreta: 1, feedback: { correct: `Perfeito. A ideia n√£o era negar a Europa, mas sim 'com√™-la' e digeri-la, criando uma cultura brasileira forte e original.`, incorrect: `O alvo principal do manifesto era a simples c√≥pia da cultura europeia, defendendo uma 'digest√£o' dela para criar algo nosso.` } }, { pergunta: `Qual detalhe na fachada da prefeitura melhor representa a ideia de ordem e modernidade do Art D√©co?`, opcoes: ["As janelas arredondadas", "O mastro da bandeira", "As linhas retas e a simetria", "A cor clara da pintura"], respostaCorreta: 2, feedback: { correct: `Isso! As linhas firmes, a simetria e a geometria eram a 'linguagem' do Art D√©co para expressar um futuro moderno e organizado.`, incorrect: `A caracter√≠stica mais forte do Art D√©co presente ali s√£o as linhas retas e a simetria da fachada.` } }, { pergunta: `Se Oswald de Andrade escrevesse um poema sobre a Prefeitura, qual verso seria mais prov√°vel?`, opcoes: ["'Saudade da Europa em pedra tropical'", "'Devoro o concreto, arroto o cidad√£o'", "'Linhas que choram pelo tempo que passou'", "'Pal√°cio de m√°rmore, t√£o longe do pov√£o'"], respostaCorreta: 1, feedback: { correct: `Com certeza! A linguagem provocadora e a ideia de 'devorar' para criar algo novo s√£o a cara de Oswald de Andrade.`, incorrect: `A op√ß√£o mais alinhada ao estilo provocador e 'antropof√°gico' de Oswald de Andrade seria "Devoro o concreto, arroto o cidad√£o".` } } ] },
    portico: { id: "portico", nome: "P√≥rtico de Erechim", artista: "Di Cavalcanti", imagemUrl: "img/portico.jpg", textoIntroducao: `Di Cavalcanti foi o pintor do povo, das ruas, da identidade brasileira. O P√≥rtico de Erechim seria para ele uma moldura para a chegada dos pioneiros, o palco onde a diversidade de etnias se encontra para construir o futuro.`, quiz: [ { pergunta: `O P√≥rtico de Erechim foi constru√≠do na entrada da cidade para homenagear principalmente:`, opcoes: ["O centen√°rio da cidade", "Os combatentes da II Guerra", "As etnias colonizadoras", "Os artistas locais"], respostaCorreta: 2, feedback: { correct: `Exato! Ele √© um tributo √† diversidade de povos (poloneses, italianos, alem√£es, etc.) que formaram a Capital da Amizade.`, incorrect: `O principal motivo da constru√ß√£o do p√≥rtico foi homenagear as diversas etnias que colonizaram a regi√£o.` } }, { pergunta: `Di Cavalcanti √© famoso por usar cores vibrantes. Olhando para o P√≥rtico, qual elemento natural ao seu redor seria um prato cheio para a paleta dele?`, opcoes: ["O asfalto da rodovia", "Os postes de luz", "As arauc√°rias e a vegeta√ß√£o nativa", "Os carros que passam"], respostaCorreta: 2, feedback: { correct: `Com certeza! Di Cavalcanti pintaria as imponentes arauc√°rias com verdes intensos, emoldurando o p√≥rtico com a for√ßa da nossa terra.`, incorrect: `Um pintor que valorizava o Brasil como Di Cavalcanti certamente se encantaria com as arauc√°rias e a vegeta√ß√£o nativa.` } }, { pergunta: `A obra mais famosa de Di Cavalcanti, que tamb√©m retrata tipos populares, se chama:`, opcoes: ["Abaporu", "Samba", "O Lavrador de Caf√©", "Oper√°rios"], respostaCorreta: 1, feedback: { correct: `Correto! A tela "Samba" √© um √≠cone de sua obra, mostrando a energia e a alma do povo brasileiro, tema que se conecta √† uni√£o de etnias em Erechim.`, incorrect: `Na verdade, a obra mais famosa dele com essa tem√°tica √© "Samba". Abaporu √© de Tarsila do Amaral.` } }, { pergunta: `O P√≥rtico tem a inscri√ß√£o "Capital da Amizade". Este t√≠tulo foi dado a Erechim por causa da:`, opcoes: ["Sua localiza√ß√£o estrat√©gica", "Harmonia entre as diversas etnias", "Assinatura de um tratado de paz", "Beleza de suas pra√ßas"], respostaCorreta: 1, feedback: { correct: `Perfeito! A conviv√™ncia pac√≠fica e a coopera√ß√£o entre os diferentes povos colonizadores renderam a Erechim este belo t√≠tulo.`, incorrect: `O t√≠tulo "Capital da Amizade" vem da conviv√™ncia harmoniosa entre as muitas etnias que formaram a cidade.` } }, { pergunta: `Os modernistas de 22 buscavam uma identidade nacional. Como o P√≥rtico de Erechim simboliza essa busca?`, opcoes: ["Copiando um monumento europeu famoso", "Usando materiais importados", "Representando a fus√£o de diferentes culturas que formam o Brasil", "Sendo uma estrutura isolada"], respostaCorreta: 2, feedback: { correct: `Exatamente! Assim como os modernistas, o p√≥rtico celebra a ideia de que a identidade brasileira √© formada pela rica mistura de seus povos.`, incorrect: `Ele simboliza essa busca ao representar a fus√£o de diferentes culturas que, juntas, formam a identidade local e, por extens√£o, a brasileira.` } } ] },
    ypiranga: { id: "ypiranga", nome: "Est√°dio do Ypiranga", artista: "Lasar Segall", imagemUrl: "img/ypiranga.jpg", textoIntroducao: `Lasar Segall capturava a alma das multid√µes. Ele n√£o veria um est√°dio, mas um 'Colosso' pulsando com a emo√ß√£o coletiva. O verde do gramado, o amarelo 'Canarinho' e o grito da torcida seriam traduzidos em pinceladas expressionistas, cheias de paix√£o e drama.`, quiz: [ { pergunta: `O Est√°dio Ol√≠mpico Colosso da Lagoa foi inaugurado em 1970. Qual era o grande objetivo de sua constru√ß√£o?`, opcoes: ["Ser o maior est√°dio do mundo", "Receber jogos da Copa do Mundo de 1970", "Atender √†s exig√™ncias da CBD para o Ypiranga disputar o campeonato nacional", "Ser um espa√ßo para shows"], respostaCorreta: 2, feedback: { correct: `Correto! Sua constru√ß√£o foi um esfor√ßo da comunidade para colocar o Ypiranga no cen√°rio do futebol nacional da √©poca.`, incorrect: `O principal motivo foi atender √†s exig√™ncias da antiga CBD (hoje CBF) para que o clube pudesse disputar o campeonato nacional.` } }, { pergunta: `As cores do Ypiranga, verde e amarelo, tamb√©m nomearam um movimento modernista. Qual era o lema do Grupo da Anta e do Verde-Amarelismo?`, opcoes: ["Tupi or not Tupi", "A alegria √© a prova dos nove", "Pau-Brasil", "Originalidade e nativismo"], respostaCorreta: 3, feedback: { correct: `Exato! O movimento Verde-Amarelo, mais nacionalista, defendia a originalidade e o nativismo na arte brasileira.`, incorrect: `O lema que guiava o grupo Verde-Amarelo era a busca pela originalidade e pelo nativismo.` } }, { pergunta: `Qual artista modernista, conhecido por retratar a emo√ß√£o e o drama de grandes grupos, melhor representaria a paix√£o da torcida do Ypiranga?`, opcoes: ["Tarsila do Amaral, com suas cores calmas", "Lasar Segall, com seu expressionismo", "Victor Brecheret, com esculturas est√°ticas", "Anita Malfatti, com retratos individuais"], respostaCorreta: 1, feedback: { correct: `Perfeito! O expressionismo de Lasar Segall √© ideal para capturar a tens√£o e a alegria coletiva de um jogo de futebol.`, incorrect: `O artista ideal seria Lasar Segall. Seu estilo expressionista era perfeito para capturar a emo√ß√£o das multid√µes.` } }, { pergunta: `O apelido 'Canarinho' do Ypiranga remete a um p√°ssaro. Qual obra de Tarsila do Amaral, √≠cone da Antropofagia, tamb√©m destaca um animal de forma central?`, opcoes: ["A Cuca", "Urutu", "O Touro", "Abaporu"], respostaCorreta: 0, feedback: { correct: `Isso! 'A Cuca', de 1924, traz um bicho imagin√°rio junto a outros elementos, representando o folclore e o imagin√°rio brasileiro.`, incorrect: `A resposta √© 'A Cuca', uma pintura de 1924 que representa um ser do folclore brasileiro.` } }, { pergunta: `Um est√°dio de futebol √© um espa√ßo para o povo. Essa valoriza√ß√£o do popular era um ideal modernista em oposi√ß√£o a qual caracter√≠stica da arte anterior?`, opcoes: ["O uso de cores vibrantes", "O foco em temas religiosos", "O car√°ter elitista e acad√™mico", "A inspira√ß√£o na natureza"], respostaCorreta: 2, feedback: { correct: `Exatamente! Os modernistas queriam tirar a arte dos sal√µes e aproxim√°-la da vida e do povo brasileiro, em oposi√ß√£o √† arte acad√™mica e elitista.`, incorrect: `Os modernistas se opunham principalmente ao car√°ter elitista e acad√™mico da arte, buscando uma conex√£o maior com o povo.` } } ] },
    chafariz: { id: "chafariz", nome: "Chafariz da Pra√ßa", artista: "Victor Brecheret", imagemUrl: "img/chafariz.jpg", textoIntroducao: `O escultor Victor Brecheret transformava pedra em movimento e emo√ß√£o. Olhando o Chafariz, ele n√£o veria s√≥ √°gua e cimento, mas formas que dan√ßam com a luz, uma escultura viva no cora√ß√£o da Pra√ßa da Bandeira, um monumento ao encontro e √† vida urbana.`, quiz: [ { pergunta: `O Chafariz √© um ponto central da pra√ßa mais famosa de Erechim. Qual o nome dela?`, opcoes: ["Pra√ßa J√∫lio de Castilhos", "Pra√ßa da Bandeira", "Pra√ßa Jayme Lago", "Pra√ßa dos Bombeiros"], respostaCorreta: 1, feedback: { correct: `Correto! A Pra√ßa da Bandeira √© o cora√ß√£o hist√≥rico e social da cidade.`, incorrect: `Ele fica na Pra√ßa da Bandeira, o ponto de encontro central de Erechim.` } }, { pergunta: `Victor Brecheret foi o principal nome da escultura em qual per√≠odo da arte brasileira?`, opcoes: ["Barroco Mineiro", "Modernismo", "Neoclassicismo", "Romantismo"], respostaCorreta: 1, feedback: { correct: `Exato! Brecheret foi o grande escultor da Semana de 22 e um dos renovadores da escultura no Brasil.`, incorrect: `Brecheret foi o principal nome da escultura no Modernismo brasileiro.` } }, { pergunta: `Recentemente, o Chafariz passou por uma grande revitaliza√ß√£o que o tornou uma atra√ß√£o noturna. O que foi instalado?`, opcoes: ["Est√°tuas de pioneiros", "Um novo sistema de som", "Uma moderna ilumina√ß√£o c√™nica com LED", "Bancos de m√°rmore"], respostaCorreta: 2, feedback: { correct: `Isso mesmo! A nova ilumina√ß√£o c√™nica com LED valorizou as formas da fonte, algo que um mestre da forma como Brecheret certamente aprovaria.`, incorrect: `A grande novidade da revitaliza√ß√£o foi a moderna ilumina√ß√£o c√™nica com luzes de LED.` } }, { pergunta: `A obra mais famosa de Brecheret √© o "Monumento √†s Bandeiras". Assim como a Pra√ßa da Bandeira, ambas as obras homenageiam:`, opcoes: ["Artistas famosos", "A natureza brasileira", "S√≠mbolos da identidade nacional e da explora√ß√£o do territ√≥rio", "Deuses da mitologia grega"], respostaCorreta: 2, feedback: { correct: `Perfeito! Tanto a bandeira quanto as bandeiras dos exploradores s√£o s√≠mbolos da constru√ß√£o da identidade e do territ√≥rio brasileiro.`, incorrect: `Ambas homenageiam s√≠mbolos da identidade nacional e da forma√ß√£o do territ√≥rio brasileiro.` } }, { pergunta: `O movimento da √°gua no Chafariz e as formas arredondadas s√£o caracter√≠sticas do estilo que Brecheret ajudou a popularizar no Brasil. Qual √©?`, opcoes: ["Cubismo", "Expressionismo", "Surrealismo", "Art D√©co"], respostaCorreta: 3, feedback: { correct: `Correto! As formas fluidas, geom√©tricas e elegantes do Art D√©co est√£o presentes tanto na obra de Brecheret quanto no design de muitas fontes da √©poca.`, incorrect: `Essas caracter√≠sticas de formas fluidas e geom√©tricas s√£o t√≠picas do Art D√©co.` } } ] },
    ifrs: { id: "ifrs", nome: "IFRS Campus Erechim", artista: "M√°rio de Andrade", imagemUrl: "img/ifrs.jpg", textoIntroducao: `M√°rio de Andrade foi o grande intelectual da Semana de 22, um pesquisador incans√°vel da cultura brasileira. Ele veria o IFRS como uma 'f√°brica de futuros', onde o conhecimento √© pesquisado, constru√≠do e compartilhado para criar um novo Brasil, moderno e tecnol√≥gico.`, quiz: [ { pergunta: `O que a sigla IFRS significa?`, opcoes: ["Instituto Federal de Refer√™ncia em Software", "Instituto Filantr√≥pico do Rio Grande do Sul", "Instituto Federal de Educa√ß√£o, Ci√™ncia e Tecnologia do Rio Grande do Sul", "Institui√ß√£o Rio-grandense de Ensino Superior"], respostaCorreta: 2, feedback: { correct: `Correto! O nome j√° reflete a miss√£o m√∫ltipla da institui√ß√£o, algo que o pol√≠mata M√°rio de Andrade admiraria.`, incorrect: `A sigla significa Instituto Federal de Educa√ß√£o, Ci√™ncia e Tecnologia do Rio Grande do Sul.` } }, { pergunta: `A principal obra de M√°rio de Andrade √© um livro que viaja pelo Brasil para construir a identidade de seu "her√≥i sem nenhum car√°ter". Qual o nome do livro?`, opcoes: ["O Guarani", "Grande Sert√£o: Veredas", "Macuna√≠ma", "Mem√≥rias P√≥stumas de Br√°s Cubas"], respostaCorreta: 2, feedback: { correct: `Exato! "Macuna√≠ma" √© uma raps√≥dia sobre o Brasil, assim como o IFRS une diferentes saberes para formar profissionais completos.`, incorrect: `O livro √© "Macuna√≠ma", um cl√°ssico do modernismo brasileiro.` } }, { pergunta: `Os modernistas queriam criar uma linguagem art√≠stica brasileira. O IFRS, por sua vez, foca em criar solu√ß√µes e formar profissionais para qual contexto?`, opcoes: ["Apenas para o mercado internacional", "Para as necessidades e o desenvolvimento local e regional", "Apenas para a pesquisa acad√™mica pura", "Para a preserva√ß√£o de tradi√ß√µes antigas"], respostaCorreta: 1, feedback: { correct: `Isso! Assim como os modernistas olharam para o Brasil, o IFRS tem um forte compromisso com o desenvolvimento da sua regi√£o.`, incorrect: `Assim como os modernistas, o IFRS foca no Brasil, mais especificamente nas necessidades e no desenvolvimento local e regional.` } }, { pergunta: `M√°rio de Andrade foi um grande pesquisador. Qual atividade, incentivada no IFRS, √© fundamental para a cria√ß√£o de ci√™ncia e tecnologia?`, opcoes: ["Aulas expositivas", "Provas de m√∫ltipla escolha", "Projetos de pesquisa e extens√£o", "Leitura de apostilas"], respostaCorreta: 2, feedback: { correct: `Perfeito! A pesquisa √© o motor do conhecimento, um ideal que conectaria o trabalho de M√°rio de Andrade ao do IFRS.`, incorrect: `A atividade que melhor representa esse esp√≠rito de descoberta s√£o os projetos de pesquisa e extens√£o.` } }, { pergunta: `A arquitetura moderna, presente no campus do IFRS, valoriza a fun√ß√£o sobre o ornamento. Este princ√≠pio foi resumido na famosa frase do arquiteto Mies van der Rohe:`, opcoes: ["'Penso, logo existo'", "'A forma segue a fun√ß√£o'", "'Menos √© mais'", "'A casa √© uma m√°quina de morar'"], respostaCorreta: 2, feedback: { correct: `Correto! O princ√≠pio de "Menos √© mais" (Less is more) define a busca pela simplicidade e funcionalidade, alinhada ao esp√≠rito de ruptura modernista.`, incorrect: `A famosa frase √© "Menos √© mais" (Less is more), um lema da arquitetura e do design moderno.` } } ] }
};


window.addEventListener('load', () => {
    let activeMarker = null, isDragging = false, hasDragged = false, offsetX = 0, offsetY = 0;
    const mapContainer = document.getElementById('map-container');
    const quizModalOverlay = document.getElementById('quiz-modal-overlay');
    const quizCloseButton = document.getElementById('quiz-close-button');
    const completionModalOverlay = document.getElementById('completion-modal-overlay');
    const completionCloseButton = document.getElementById('completion-close-button');
    const restartAllButton = document.getElementById('restart-all-button');
    const allMarkers = document.querySelectorAll('.map-marker');
    const quizContainer = document.getElementById('quiz-container');
    const quizResultsArea = document.getElementById('quiz-results-area');

    function initializeState() { Object.values(pontosTuristicos).forEach(spot => { spot.isAnswered = false; spot.userAnswers = []; spot.score = 0; }); }

    function initializePositions() {
        allMarkers.forEach(marker => {
            marker.removeAttribute('style');
        });
        setTimeout(drawConnectingLines, 50);
    }
    
    function drawConnectingLines() { const svg = document.getElementById('map-lines'); svg.innerHTML = ''; for (let i = 0; i < connectionPath.length - 1; i++) { const startPointId = connectionPath[i]; const endPointId = connectionPath[i+1]; const startMarker = document.getElementById(`marker-${startPointId}`); const endMarker = document.getElementById(`marker-${endPointId}`); if (startMarker && endMarker) { const x1 = startMarker.offsetLeft + startMarker.offsetWidth / 2; const y1 = startMarker.offsetTop + startMarker.offsetHeight / 2; const x2 = endMarker.offsetLeft + endMarker.offsetWidth / 2; const y2 = endMarker.offsetTop + endMarker.offsetHeight / 2; const line = document.createElementNS('http://www.w3.org/2000/svg', 'line'); line.setAttribute('x1', x1); line.setAttribute('y1', y1); line.setAttribute('x2', x2); line.setAttribute('y2', y2); line.setAttribute('stroke', 'white'); line.setAttribute('stroke-width', '3'); line.setAttribute('stroke-dasharray', '5, 5'); svg.appendChild(line); } } }
    function dragStart(e) { activeMarker = e.currentTarget; const tooltip = activeMarker.querySelector('.tooltip'); if (tooltip) { tooltip.classList.remove('visible'); } e.preventDefault(); const markerRect = activeMarker.getBoundingClientRect(); offsetX = e.clientX - markerRect.left; offsetY = e.clientY - markerRect.top; isDragging = true; hasDragged = false; activeMarker.classList.add('dragging'); document.addEventListener('mousemove', dragging); document.addEventListener('mouseup', dragEnd); }
    function dragging(e) { if (!isDragging) return; hasDragged = true; e.preventDefault(); const mapRect = mapContainer.getBoundingClientRect(); let newX = e.clientX - mapRect.left - offsetX; let newY = e.clientY - mapRect.top - offsetY; const markerSize = activeMarker.offsetWidth; if (newX < 0) newX = 0; if (newY < 0) newY = 0; if (newX > mapContainer.clientWidth - markerSize) newX = mapContainer.clientWidth - markerSize; if (newY > mapContainer.clientHeight - markerSize) newY = mapContainer.clientHeight - markerSize; activeMarker.style.left = `${newX}px`; activeMarker.style.top = `${newY}px`; drawConnectingLines(); }
    function dragEnd() { if (!isDragging) return; isDragging = false; if (activeMarker) { activeMarker.classList.remove('dragging'); } activeMarker = null; document.removeEventListener('mousemove', dragging); document.removeEventListener('mouseup', dragEnd); }
    function showTooltip(e) { const marker = e.currentTarget; const tooltip = marker.querySelector('.tooltip'); if (!tooltip || isDragging) return; tooltip.classList.remove('position-above', 'position-below'); tooltip.style.transform = ''; const markerTop = marker.offsetTop; const tooltipHeight = tooltip.offsetHeight || 40; if (markerTop < tooltipHeight + 10) { tooltip.classList.add('position-below'); } else { tooltip.classList.add('position-above'); } const mapWidth = mapContainer.clientWidth; const markerLeft = marker.offsetLeft; const markerWidth = marker.offsetWidth; const tooltipWidth = tooltip.offsetWidth; const tooltipHalfWidth = tooltipWidth / 2; const idealTooltipLeft = markerLeft + (markerWidth / 2) - tooltipHalfWidth; let horizontalAdjust = 0; if (idealTooltipLeft + tooltipWidth > mapWidth) { const overflow = (idealTooltipLeft + tooltipWidth) - mapWidth; horizontalAdjust = -overflow - 10; } if (idealTooltipLeft < 0) { const overflow = idealTooltipLeft; horizontalAdjust = -overflow + 10; } if (horizontalAdjust !== 0) { tooltip.style.transform = `translateX(${horizontalAdjust}px)`; } tooltip.classList.add('visible'); }
    function hideTooltip(e) { const tooltip = e.currentTarget.querySelector('.tooltip'); if (tooltip) { tooltip.classList.remove('visible'); } }
    
    function openQuizModal(spotId) {
        const spotData = pontosTuristicos[spotId];
        if (!spotData) return;
        document.querySelector('#quiz-modal-overlay .modal-content').scrollTop = 0;
        document.getElementById('modal-title').textContent = `${spotData.nome} pelos olhos de ${spotData.artista}`;
        document.getElementById('modal-image').style.backgroundImage = `url(${spotData.imagemUrl})`;
        document.getElementById('modal-intro').textContent = spotData.textoIntroducao;
        quizContainer.innerHTML = '';
        quizResultsArea.innerHTML = '';
        if (spotData.isAnswered) {
            buildAnsweredQuiz(spotData);
        } else {
            buildQuiz(spotData);
        }
        quizModalOverlay.style.display = 'flex';
    }
    function closeQuizModal() { quizModalOverlay.style.display = 'none'; }
    function showCompletionModal() {
        const totalScore = Object.values(pontosTuristicos).reduce((sum, spot) => sum + spot.score, 0);
        const totalQuestions = Object.values(pontosTuristicos).reduce((sum, spot) => sum + spot.quiz.length, 0);
        document.getElementById('final-score').textContent = totalScore;
        document.getElementById('total-questions').textContent = totalQuestions;
        completionModalOverlay.style.display = 'flex';
    }
    function closeCompletionModal() { completionModalOverlay.style.display = 'none'; }
    
    function buildQuiz(spotData, isAnsweredView = false) {
        const form = document.createElement('form');
        form.id = 'quiz-form';
        quizContainer.appendChild(form);
        spotData.quiz.forEach((q, index) => {
            const questionBlock = document.createElement('div');
            questionBlock.className = 'question-block';
            const questionTitle = document.createElement('h4');
            questionTitle.textContent = `Pergunta ${index + 1}: ${q.pergunta}`;
            questionBlock.appendChild(questionTitle);
            q.opcoes.forEach((opcao, i) => {
                const label = document.createElement('label');
                const input = document.createElement('input');
                const textSpan = document.createElement('span');
                input.type = 'radio';
                input.name = `question-${index}`;
                input.value = i;
                textSpan.textContent = ` ${opcao}`;
                if (isAnsweredView) {
                    input.checked = (spotData.userAnswers[index] === i);
                    input.disabled = true;
                } else {
                    input.required = true;
                }
                label.appendChild(input);
                label.appendChild(textSpan);
                questionBlock.appendChild(label);
            });
            const feedback = document.createElement('div');
            feedback.className = 'feedback';
            if (isAnsweredView) {
                const userAnswer = spotData.userAnswers[index];
                if (userAnswer === q.respostaCorreta) {
                    feedback.textContent = `‚úÖ ${q.feedback.correct}`;
                    feedback.className = 'feedback correct';
                } else {
                    feedback.textContent = `‚ùå ${q.feedback.incorrect}`;
                    feedback.className = 'feedback incorrect';
                }
                feedback.style.display = 'block';
            }
            questionBlock.appendChild(feedback);
            form.appendChild(questionBlock);
        });
        if (!isAnsweredView) {
            const submitButton = document.createElement('button');
            submitButton.type = 'submit';
            submitButton.id = 'quiz-submit';
            submitButton.className = 'quiz-button';
            submitButton.textContent = 'Verificar Respostas';
            form.appendChild(submitButton);
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                checkAnswers(spotData);
            });
        }
    }

    function buildAnsweredQuiz(spotData) {
        buildQuiz(spotData, true);
        showResults(spotData);
    }

    function checkAnswers(spotData) {
        let score = 0;
        const form = document.getElementById('quiz-form');
        spotData.quiz.forEach((q, index) => {
            const selectedOption = form.querySelector(`input[name="question-${index}"]:checked`);
            if (selectedOption) {
                const answerIndex = parseInt(selectedOption.value);
                spotData.userAnswers[index] = answerIndex;
                if (answerIndex === q.respostaCorreta) {
                    score++;
                }
            }
        });
        spotData.score = score;
        spotData.isAnswered = true;
        quizContainer.innerHTML = '';
        buildAnsweredQuiz(spotData);
        const allAnswered = Object.values(pontosTuristicos).every(spot => spot.isAnswered);
        if (allAnswered) {
            setTimeout(showCompletionModal, 1500);
        }
    }

    function showResults(spotData) {
        quizResultsArea.innerHTML = '';
        const scoreText = document.createElement('p');
        scoreText.id = 'quiz-score';
        scoreText.textContent = `Voc√™ acertou ${spotData.score} de ${spotData.quiz.length} perguntas!`;
        quizResultsArea.appendChild(scoreText);
        const buttonsContainer = document.createElement('div');
        buttonsContainer.className = 'results-buttons';
        quizResultsArea.appendChild(buttonsContainer);
        const backButton = document.createElement('button');
        backButton.id = 'back-button';
        backButton.className = 'quiz-button';
        backButton.textContent = 'Voltar para o Roteiro';
        backButton.addEventListener('click', closeQuizModal);
        buttonsContainer.appendChild(backButton);
        const resetButton = document.createElement('button');
        resetButton.id = 'reset-button';
        resetButton.className = 'quiz-button';
        resetButton.textContent = 'Responder Novamente';
        resetButton.addEventListener('click', () => {
            spotData.isAnswered = false;
            spotData.userAnswers = [];
            spotData.score = 0;
            openQuizModal(spotData.id);
        });
        buttonsContainer.appendChild(resetButton);
    }
        
    initializeState();
    drawConnectingLines();

    window.addEventListener('resize', drawConnectingLines);

    allMarkers.forEach(marker => {
        marker.addEventListener('mousedown', dragStart);
        marker.addEventListener('click', (e) => {
            if (!hasDragged) {
                openQuizModal(e.currentTarget.dataset.spot);
            }
        });
        marker.addEventListener('mouseenter', showTooltip);
        marker.addEventListener('mouseleave', hideTooltip);
    });

    quizCloseButton.addEventListener('click', closeQuizModal);
    quizModalOverlay.addEventListener('click', (event) => { if (event.target === quizModalOverlay) closeQuizModal(); });
    
    completionCloseButton.addEventListener('click', closeCompletionModal);
    completionModalOverlay.addEventListener('click', (event) => { if (event.target === completionModalOverlay) closeCompletionModal(); });

    restartAllButton.addEventListener('click', () => {
        closeCompletionModal();
        initializeState();
        allMarkers.forEach(marker => {
            marker.removeAttribute('style');
        });
        setTimeout(drawConnectingLines, 50);
    });
});
</script>

</body>
</html>